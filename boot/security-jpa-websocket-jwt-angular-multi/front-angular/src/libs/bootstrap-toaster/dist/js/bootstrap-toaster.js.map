{"version":3,"file":"bootstrap-toaster.js","sources":["../../src/js/toaster.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap-Toaster (v0.0.1): toaster.js\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\n const NAME               = 'toaster'\n const VERSION            = '0.0.1'\n\nconst Default = {\n    title   : false,\n    content : '<em>No content</em>',\n    delay   : 3000,\n    position: 'top right',\n    containerOption: {},\n    buttonOption: {},\n    headerOption: {},\n    bodyOption: {}\n}\nconst DefaultTitle = {\n    text    : '',\n    icon    : null,\n    image   : null,\n    close   : true,\n    info    : false\n}\n\nlet ToasterObject;\nlet ToasterContainer = {};\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Toaster {\n    constructor(opt, title) {\n        if(null === opt)\n            return\n        if(!ToasterObject)\n            ToasterObject = new Toaster(null);\n        ToasterObject._open(opt, title);\n    }\n\n    // Privates\n\n    _getContainer(config){\n        let position = (config.position || 'top right').split(' ');\n        let ver = position[0] || 'top'\n        let hor = position[1] || 'right'\n\n        if(!['top','bottom'].includes(ver))\n            ver = 'top'\n        if(!['left','center','right'].includes(hor))\n            hor = 'right'\n\n        position = `${ver} ${hor}`;\n\n        if(ToasterContainer[position])\n            return ToasterContainer[position];\n\n        let html = this._makeContainer(ver, hor);\n        ToasterContainer[position] = $(html).appendTo('body');\n\n        return ToasterContainer[position];\n    }\n\n    _makeBody(config){\n\n        return `<div class=\"toast-body  ${config.headerOption.class?config.bodyOption.class:''}\" ${config.bodyOption.style?'style=\"'+config.bodyOption.style+'\"':''}>${config.content}</div>`;\n    }\n\n    _makeContainer(ver, hor){\n        let css = `position:fixed;width:320px;${ver}:20px;z-index:1060;`\n\n        if(hor === 'center')\n            css+= 'left:50%;margin-left:-160px'\n        else\n            css+= `${hor}:20px`;\n\n        return `<div aria-live=\"polite\" aria-atomic=\"true\" style=\"${css}\"></div>`;\n    }\n\n    _makeHeader(config){\n        if(!config.title)\n            return '';\n\n        if(typeof config.title === 'string')\n            config.title = { text : config.title }\n        \n        let title = { ...DefaultTitle, ...config.title };\n\n        let eImage = '';\n        if(title.image)\n            eImage = `<img src=\"${title.image}\" class=\"rounded mr-2\" alt=\"#\">`;\n        else if(title.icon)\n            eImage = `<i class=\"${title.icon} mr-2\"></i>`;\n\n        let eTitle = !title.text ? ''\n            : `<strong class=\"mr-auto\">${title.text}</strong>`\n\n        let eInfo = !title.info ? ''\n            : `<small>${title.info}</small>`;\n\n        let eClose = !title.close  ? ''\n            : ` <button type=\"button\" class=\"ml-2 mb-1 close ${config.buttonOption.class?config.buttonOption.class:''}\"  ${config.buttonOption.style?'style=\"'+config.buttonOption.style+'\"':''} data-dismiss=\"toast\" aria-label=\"Close\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>`;\n\n        return `\n            <div class=\"toast-header ${config.headerOption.class?config.headerOption.class:''}\"  ${config.headerOption.style?'style=\"'+config.headerOption.style+'\"':''}>\n                ${eImage}\n                ${eTitle}\n                ${eInfo}\n                ${eClose}\n            </div>\n        `;\n    }\n\n    _makeHtml(config){\n        let header = this._makeHeader(config);\n        let body   = this._makeBody(config);\n\n        return `\n            <div class=\"toast  ${config.containerOption.class?config.containerOption.class:''}\" ${config.containerOption.style?'style=\"'+config.containerOption.style+'\"':''} role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\">\n                ${header}${body}\n            </div>`;\n    }\n\n    _open(opt, title){\n        if(typeof opt !== 'object'){\n            opt = {content: opt}\n            if(undefined !== title)\n                opt.title = title;\n        }\n\n        const config = { ...Default, ...opt };\n        const html = this._makeHtml(config)\n\n        $(html)\n            .appendTo(this._getContainer(config))\n            .toast({\n                animation: true,\n                autohide : true,\n                delay    : config.delay\n            })\n            .toast('show')\n            .on('hidden.bs.toast', function(){\n                $(this).remove()\n            })\n    }\n\n    // Getters\n\n    static get VERSION() {\n        return VERSION\n    }\n\n    static get Default() {\n        return Default\n    }\n\n    // Static\n\n    static setDefault(opts){\n        for(let k in opts)\n            Default[k] = opts[k]\n    }\n}\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$[NAME] = Toaster\n\nexport default Toaster\n"],"names":["NAME","VERSION","Default","title","content","delay","position","containerOption","buttonOption","headerOption","bodyOption","DefaultTitle","text","icon","image","close","info","ToasterObject","ToasterContainer","Toaster","constructor","opt","_open","_getContainer","config","split","ver","hor","includes","html","_makeContainer","$","appendTo","_makeBody","class","style","css","_makeHeader","eImage","eTitle","eInfo","eClose","_makeHtml","header","body","undefined","toast","animation","autohide","on","remove","setDefault","opts","k"],"mappings":"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"}