{"version":3,"file":"bootstrap-toaster.js","sources":["../../src/js/toaster.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap-Toaster (v0.0.1): toaster.js\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\n const NAME               = 'toaster'\n const VERSION            = '0.0.1'\n\nconst Default = {\n    title   : false,\n    content : '<em>No content</em>',\n    delay   : 3000,\n    position: 'top right'\n}\nconst DefaultTitle = {\n    text    : '',\n    icon    : null,\n    image   : null,\n    close   : true,\n    info    : false\n}\n\nlet ToasterObject;\nlet ToasterContainer = {};\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Toaster {\n    constructor(opt, title) {\n        if(null === opt)\n            return\n        if(!ToasterObject)\n            ToasterObject = new Toaster(null);\n        ToasterObject._open(opt, title);\n    }\n\n    // Privates\n\n    _getContainer(config){\n        let position = (config.position || 'top right').split(' ');\n        let ver = position[0] || 'top'\n        let hor = position[1] || 'right'\n\n        if(!['top','bottom'].includes(ver))\n            ver = 'top'\n        if(!['left','center','right'].includes(hor))\n            hor = 'right'\n\n        position = `${ver} ${hor}`;\n\n        if(ToasterContainer[position])\n            return ToasterContainer[position];\n\n        let html = this._makeContainer(ver, hor);\n        ToasterContainer[position] = $(html).appendTo('body');\n\n        return ToasterContainer[position];\n    }\n\n    _makeBody(config){\n        return `<div class=\"toast-body\">${config.content}</div>`;\n    }\n\n    _makeContainer(ver, hor){\n        let css = `position:fixed;width:320px;${ver}:20px;z-index:1060;`\n\n        if(hor === 'center')\n            css+= 'left:50%;margin-left:-160px'\n        else\n            css+= `${hor}:20px`;\n\n        return `<div aria-live=\"polite\" aria-atomic=\"true\" style=\"${css}\"></div>`;\n    }\n\n    _makeHeader(config){\n        if(!config.title)\n            return '';\n\n        if(typeof config.title === 'string')\n            config.title = { text : config.title }\n        \n        let title = { ...DefaultTitle, ...config.title };\n\n        let eImage = '';\n        if(title.image)\n            eImage = `<img src=\"${title.image}\" class=\"rounded mr-2\" alt=\"#\">`;\n        else if(title.icon)\n            eImage = `<i class=\"${title.icon} mr-2\"></i>`;\n\n        let eTitle = !title.text ? ''\n            : `<strong class=\"mr-auto\">${title.text}</strong>`\n\n        let eInfo = !title.info ? ''\n            : `<small>${title.info}</small>`;\n\n        let eClose = !title.close  ? ''\n            : ` <button type=\"button\" class=\"ml-2 mb-1 close\" data-dismiss=\"toast\" aria-label=\"Close\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>`;\n\n        return `\n            <div class=\"toast-header\">\n                ${eImage}\n                ${eTitle}\n                ${eInfo}\n                ${eClose}\n            </div>\n        `;\n    }\n\n    _makeHtml(config){\n        let header = this._makeHeader(config);\n        let body   = this._makeBody(config);\n\n        return `\n            <div class=\"toast\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\">\n                ${header} ${body}\n            </div>`;\n    }\n\n    _open(opt, title){\n        if(typeof opt !== 'object'){\n            opt = {content: opt}\n            if(undefined !== title)\n                opt.title = title;\n        }\n\n        const config = { ...Default, ...opt }\n        const html = this._makeHtml(config)\n\n        $(html)\n            .appendTo(this._getContainer(config))\n            .toast({\n                animation: true,\n                autohide : true,\n                delay    : config.delay\n            })\n            .toast('show')\n            .on('hidden.bs.toast', function(){\n                $(this).remove()\n            })\n    }\n\n    // Getters\n\n    static get VERSION() {\n        return VERSION\n    }\n\n    static get Default() {\n        return Default\n    }\n\n    // Static\n\n    static setDefault(opts){\n        for(let k in opts)\n            Default[k] = opts[k]\n    }\n}\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$[NAME] = Toaster\n\nexport default Toaster"],"names":["NAME","VERSION","Default","title","content","delay","position","DefaultTitle","text","icon","image","close","info","ToasterObject","ToasterContainer","Toaster","opt","_open","_getContainer","config","split","ver","hor","includes","html","_makeContainer","$","appendTo","_makeBody","css","_makeHeader","eImage","eTitle","eInfo","eClose","_makeHtml","header","body","undefined","toast","animation","autohide","on","remove","setDefault","opts","k"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAQA;;;;;;EAMC,IAAMA,IAAI,GAAiB,SAA3B;EACA,IAAMC,OAAO,GAAc,OAA3B;EAED,IAAMC,OAAO,GAAG;EACZC,EAAAA,KAAK,EAAK,KADE;EAEZC,EAAAA,OAAO,EAAG,qBAFE;EAGZC,EAAAA,KAAK,EAAK,IAHE;EAIZC,EAAAA,QAAQ,EAAE;EAJE,CAAhB;EAMA,IAAMC,YAAY,GAAG;EACjBC,EAAAA,IAAI,EAAM,EADO;EAEjBC,EAAAA,IAAI,EAAM,IAFO;EAGjBC,EAAAA,KAAK,EAAK,IAHO;EAIjBC,EAAAA,KAAK,EAAK,IAJO;EAKjBC,EAAAA,IAAI,EAAM;EALO,CAArB;EAQA,IAAIC,aAAJ;EACA,IAAIC,gBAAgB,GAAG,EAAvB;EAEA;;;;;;MAMMC;;;EACF,mBAAYC,GAAZ,EAAiBb,KAAjB,EAAwB;EACpB,QAAG,SAASa,GAAZ,EACI;EACJ,QAAG,CAACH,aAAJ,EACIA,aAAa,GAAG,IAAIE,OAAJ,CAAY,IAAZ,CAAhB;;EACJF,IAAAA,aAAa,CAACI,KAAd,CAAoBD,GAApB,EAAyBb,KAAzB;EACH;;;;;WAIDe,gBAAA,uBAAcC,MAAd,EAAqB;EACjB,QAAIb,QAAQ,GAAG,CAACa,MAAM,CAACb,QAAP,IAAmB,WAApB,EAAiCc,KAAjC,CAAuC,GAAvC,CAAf;EACA,QAAIC,GAAG,GAAGf,QAAQ,CAAC,CAAD,CAAR,IAAe,KAAzB;EACA,QAAIgB,GAAG,GAAGhB,QAAQ,CAAC,CAAD,CAAR,IAAe,OAAzB;EAEA,QAAG,CAAC,CAAC,KAAD,EAAO,QAAP,EAAiBiB,QAAjB,CAA0BF,GAA1B,CAAJ,EACIA,GAAG,GAAG,KAAN;EACJ,QAAG,CAAC,CAAC,MAAD,EAAQ,QAAR,EAAiB,OAAjB,EAA0BE,QAA1B,CAAmCD,GAAnC,CAAJ,EACIA,GAAG,GAAG,OAAN;EAEJhB,IAAAA,QAAQ,GAAMe,GAAN,SAAaC,GAArB;EAEA,QAAGR,gBAAgB,CAACR,QAAD,CAAnB,EACI,OAAOQ,gBAAgB,CAACR,QAAD,CAAvB;;EAEJ,QAAIkB,IAAI,GAAG,KAAKC,cAAL,CAAoBJ,GAApB,EAAyBC,GAAzB,CAAX;;EACAR,IAAAA,gBAAgB,CAACR,QAAD,CAAhB,GAA6BoB,CAAC,CAACF,IAAD,CAAD,CAAQG,QAAR,CAAiB,MAAjB,CAA7B;EAEA,WAAOb,gBAAgB,CAACR,QAAD,CAAvB;EACH;;WAEDsB,YAAA,mBAAUT,MAAV,EAAiB;EACb,0CAAkCA,MAAM,CAACf,OAAzC;EACH;;WAEDqB,iBAAA,wBAAeJ,GAAf,EAAoBC,GAApB,EAAwB;EACpB,QAAIO,GAAG,mCAAiCR,GAAjC,wBAAP;EAEA,QAAGC,GAAG,KAAK,QAAX,EACIO,GAAG,IAAG,6BAAN,CADJ,KAGIA,GAAG,IAAMP,GAAN,UAAH;EAEJ,uEAA4DO,GAA5D;EACH;;WAEDC,cAAA,qBAAYX,MAAZ,EAAmB;EACf,QAAG,CAACA,MAAM,CAAChB,KAAX,EACI,OAAO,EAAP;EAEJ,QAAG,OAAOgB,MAAM,CAAChB,KAAd,KAAwB,QAA3B,EACIgB,MAAM,CAAChB,KAAP,GAAe;EAAEK,MAAAA,IAAI,EAAGW,MAAM,CAAChB;EAAhB,KAAf;;EAEJ,QAAIA,KAAK,qBAAQI,YAAR,EAAyBY,MAAM,CAAChB,KAAhC,CAAT;;EAEA,QAAI4B,MAAM,GAAG,EAAb;EACA,QAAG5B,KAAK,CAACO,KAAT,EACIqB,MAAM,mBAAgB5B,KAAK,CAACO,KAAtB,yCAAN,CADJ,KAEK,IAAGP,KAAK,CAACM,IAAT,EACDsB,MAAM,mBAAgB5B,KAAK,CAACM,IAAtB,iBAAN;EAEJ,QAAIuB,MAAM,GAAG,CAAC7B,KAAK,CAACK,IAAP,GAAc,EAAd,kCACoBL,KAAK,CAACK,IAD1B,cAAb;EAGA,QAAIyB,KAAK,GAAG,CAAC9B,KAAK,CAACS,IAAP,GAAc,EAAd,eACIT,KAAK,CAACS,IADV,aAAZ;EAGA,QAAIsB,MAAM,GAAG,CAAC/B,KAAK,CAACQ,KAAP,GAAgB,EAAhB,8LAAb;EAKA,4EAEUoB,MAFV,0BAGUC,MAHV,0BAIUC,KAJV,0BAKUC,MALV;EAQH;;WAEDC,YAAA,mBAAUhB,MAAV,EAAiB;EACb,QAAIiB,MAAM,GAAG,KAAKN,WAAL,CAAiBX,MAAjB,CAAb;;EACA,QAAIkB,IAAI,GAAK,KAAKT,SAAL,CAAeT,MAAf,CAAb;;EAEA,iIAEUiB,MAFV,SAEoBC,IAFpB;EAIH;;WAEDpB,QAAA,eAAMD,GAAN,EAAWb,KAAX,EAAiB;EACb,QAAG,OAAOa,GAAP,KAAe,QAAlB,EAA2B;EACvBA,MAAAA,GAAG,GAAG;EAACZ,QAAAA,OAAO,EAAEY;EAAV,OAAN;EACA,UAAGsB,SAAS,KAAKnC,KAAjB,EACIa,GAAG,CAACb,KAAJ,GAAYA,KAAZ;EACP;;EAED,QAAMgB,MAAM,qBAAQjB,OAAR,EAAoBc,GAApB,CAAZ;;EACA,QAAMQ,IAAI,GAAG,KAAKW,SAAL,CAAehB,MAAf,CAAb;;EAEAO,IAAAA,CAAC,CAACF,IAAD,CAAD,CACKG,QADL,CACc,KAAKT,aAAL,CAAmBC,MAAnB,CADd,EAEKoB,KAFL,CAEW;EACHC,MAAAA,SAAS,EAAE,IADR;EAEHC,MAAAA,QAAQ,EAAG,IAFR;EAGHpC,MAAAA,KAAK,EAAMc,MAAM,CAACd;EAHf,KAFX,EAOKkC,KAPL,CAOW,MAPX,EAQKG,EARL,CAQQ,iBARR,EAQ2B,YAAU;EAC7BhB,MAAAA,CAAC,CAAC,IAAD,CAAD,CAAQiB,MAAR;EACH,KAVL;EAWH;;;EAYD;YAEOC,aAAP,oBAAkBC,IAAlB,EAAuB;EACnB,SAAI,IAAIC,CAAR,IAAaD,IAAb;EACI3C,MAAAA,OAAO,CAAC4C,CAAD,CAAP,GAAaD,IAAI,CAACC,CAAD,CAAjB;EADJ;EAEH;;;;0BAboB;EACjB,aAAO7C,OAAP;EACH;;;0BAEoB;EACjB,aAAOC,OAAP;EACH;;;;;EAUL;;;;;;;EAMAwB,CAAC,CAAC1B,IAAD,CAAD,GAAUe,OAAV;;;;;;;;;;;;"}